#!/usr/local/bin/ruby -ws

# for testing, we use
#     ppgit .... --file <the_temp_file_path>
if (idx = ARGV.index('--file'))
  ARGV.delete_at(idx)             # remove '--files'
  the_config_file = ARGV.delete_at(idx)
  file_part = " --file #{the_config_file}"
end



old_user_name = `git config #{file_part} --get  user.name`
if '' != old_user_name
  old_user_name.chomp!
  `git config #{file_part} user-before-ppgit.name '#{old_user_name}'`
end



two_users  = [ARGV[0], ARGV[1]]
pair_user  = two_users.sort.join('_')
pair_email = ARGV[2]

`git config #{file_part} user.name #{pair_user}`
if pair_email
  `git config #{file_part} user.email #{pair_email}`
end
