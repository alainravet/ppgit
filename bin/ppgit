#!/usr/bin/env ruby -w

$: << File.expand_path(File.join(File.dirname(__FILE__), '..', 'lib' ))
require 'ppgit/parts'

if ARGV.empty?
  do_ppgit_show_usage_message()

else
  # for testing, we pass an explicit - temporary - config file through --file
  file_part = argv_value_of('--file')
  PPGIT_FILE_PART = file_part && "--file #{file_part}"

  if emailroot = argv_value_of('--email_root')
    do_ppgit_emailroot(emailroot)
  end

  if ARGV == %w(info)

  elsif ARGV == %w(clear)
    do_ppgit_clear

  elsif [2, 3].include?(ARGV.length)
    do_ppgit_set_pair_as_a_user(user_1=ARGV[0], user_2=ARGV[1], pair_email=ARGV[2])
  end

#  do_ppgit_info('--file ~/.gitconfig')
#  do_ppgit_info('--file ./.git/config')
  do_ppgit_info()
end